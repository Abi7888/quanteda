<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Text from a twitter search | Quantitative Text Analysis with R</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.1">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="prev" href="../chap1/fromfiles.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
    

        
    <div class="book" data-level="2.2" data-basepath=".." data-revision="Tue May 05 2015 18:17:05 GMT+0100 (BST)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="intro/overview.html">
            
                
                    <a href="../intro/overview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Overview
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="intro/wordcloud.html">
            
                
                    <a href="../intro/wordcloud.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        wordcloud
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="intro/data.html">
            
                
                    <a href="../intro/data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Data package
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="chap1/corpus.html">
            
                
                    <a href="../chap1/corpus.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Corpus Sources
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="chap1/fromfiles.html">
            
                
                    <a href="../chap1/fromfiles.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Importing from filesystem
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="2.2" data-path="chap1/fromtwitter.html">
            
                
                    <a href="../chap1/fromtwitter.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Text from a twitter search
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Quantitative Text Analysis with R</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h2 id="building-a-corpus-from-a-twitter-search">Building a corpus from a twitter search</h2>
<p>quanteda provides an interface to retrieve and store data from a twitter search as a corpus object. The REST API query uses the twitteR package, and an API authorization from twitter is required. The process of obtaining this authorization is described in detail here: <a href="https://openhatch.org/wiki/Community_Data_Science_Workshops/Twitter_authentication_setup" target="_blank">https://openhatch.org/wiki/Community_Data_Science_Workshops/Twitter_authentication_setup</a>, correct as of July 2014.</p>
<p>Four keys are required, to be passed to quanteda&apos;s getTweets function, in addition to the search query term and the number of results required. The maximum number of results that can be oibtained is not exactly identified in the API documentaiton, but experimentation indicates an upper bound of around 1500 results from a single query, with a frequency limit of one query per minute.</p>
<p>The code below performs authentication and runs a search for the string &apos;quantitative&apos;. The search is performed through the twitter REST API using the <a href="https://github.com/geoffjentry/twitteR" target="_blank">twitteR package</a> which contains many other functions for working with the API.</p>
<pre><code class="lang-r">consumer_key=<span class="hljs-string">&quot;vRLy03ef6OFAZB7oCL4jA&quot;</span>
consumer_secret=<span class="hljs-string">&quot;wWF35Lr1raBrPerVHSDyRftv8qB1H7ltV0T3Srb3s&quot;</span>
access_token=<span class="hljs-string">&quot;1577780816-wVbOZEED8KZs70PwJ2q5ld2w9CcvcZ2kC6gPnAo&quot;</span>
token_secret=<span class="hljs-string">&quot;IeC6iYlgUK9csWiP524Jb4UNM8RtQmHyetLi9NZrkJA&quot;</span>
tw &lt;- getTweets(<span class="hljs-string">&apos;quantitative&apos;</span>, numResults=<span class="hljs-number">20</span>, consumer_key, consumer_secret, access_token, token_secret)
</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;getTweets&quot;
</code></pre><p>The return value from this query is a twitter object which can be passed to quanteda&apos;s corpus constructor:</p>
<pre><code class="lang-r">twCorpus &lt;- corpus(tw)
</code></pre>
<pre><code>## Error in corpus(tw): object &apos;tw&apos; not found
</code></pre><pre><code class="lang-r">print(twCorpus)
</code></pre>
<pre><code>## Error in print(twCorpus): object &apos;twCorpus&apos; not found
</code></pre><p>The docvars of this corpus contain some metadata associated with the returned tweets.</p>
<pre><code class="lang-r">names(docvars(twCorpus))
</code></pre>
<pre><code>## Error in which(names(documents(x)) != &quot;texts&quot;): error in evaluating the argument &apos;x&apos; in selecting a method for function &apos;which&apos;: Error in documents(x) : object &apos;twCorpus&apos; not found
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../chap1/fromfiles.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Importing from filesystem"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
